# Project Structure

## Directory Layout

```
/
├── src/
│   ├── controllers/        # TSOA controller classes with decorators
│   │   ├── user.controller.ts
│   │   └── todo.controller.ts
│   ├── models/            # TypeScript interfaces for data models
│   │   ├── user.ts
│   │   ├── todo.ts
│   │   └── error.ts
│   ├── lib/               # Shared utilities and database setup
│   │   └── database.ts
│   ├── routes.ts          # Auto-generated by TSOA (DO NOT EDIT)
│   └── server.ts          # Express server setup and entry point
├── public/
│   └── openapi.json       # Auto-generated OpenAPI spec (DO NOT EDIT)
├── database.sqlite        # SQLite database file
├── tsoa.json              # TSOA configuration
├── tsconfig.json          # TypeScript configuration
└── package.json
```

## Architecture Patterns

### Controllers

- Located in `src/controllers/`
- Extend `Controller` from TSOA
- Use decorators for routing: `@Route`, `@Get`, `@Post`, `@Put`, `@Delete`
- Use decorators for parameters: `@Path`, `@Query`, `@Body`
- Use decorators for responses: `@SuccessResponse`, `@Response`
- Include JSDoc comments for API documentation
- Handle errors with appropriate HTTP status codes using `this.setStatus()`

### Models

- Located in `src/models/`
- Pure TypeScript interfaces (no classes)
- Separate interfaces for entities, create requests, and update requests
- Example: `User`, `CreateUserRequest`, `UpdateUserRequest`

### Database

- Single database instance exported from `src/lib/database.ts`
- Uses Bun's native SQLite driver (`bun:sqlite`)
- WAL mode enabled for performance
- Schema initialization on startup
- Direct SQL queries using prepared statements

### Error Handling

- Controllers set HTTP status codes explicitly
- Throw errors with descriptive messages
- Common patterns:
  - 404 for not found
  - 400 for validation errors (e.g., duplicate email)
  - 500 for server errors
  - 204 for successful deletion

## File Naming Conventions

- Controllers: `*.controller.ts`
- Models: `*.ts` (lowercase, singular)
- Use kebab-case for multi-word files
- TypeScript extensions: `.ts` (not `.tsx`)

## Import Conventions

- Use relative imports within `src/`
- Import types with `type` keyword: `import type { User } from "../models/user"`
- Database import: `import { db } from "../lib/database"`
- TSOA decorators: `import { Route, Get, Post, ... } from "tsoa"`
